<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-28 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="OpenMeetings Team" />
    <meta name="Date-Revision-yyyymmdd" content="20140528" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Apache OpenMeetings Project - 
		SIP-Transport Integration</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<link rel="stylesheet" href="./css/openmeetings.css"/>
                      
        
<script src="./js/site.js" type="text/javascript"></script>
          
                  </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="index.html" id="bannerLeft">
                                                                                                <img src="images/logo-2.jpg"  alt="Apache OpenMeetings"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-28
                   </li>
                      
                
                    
      
                                    
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="https://cwiki.apache.org/confluence/display/OPENMEETINGS" class="externalLink" title="Wiki">
        Wiki</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="installation.html" title="Installation">
        Installation</a>
      </li>

  
    <li class="pull-right">
        <span class="divider">|</span>
                      <a href="downloads.html" title="Download">
        Download</a>
      </li>

  
    <li class="pull-right">
                      <a href="demo.html" title="Demo">
        Demo</a>
      </li>

                    </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                                                                                                                                              
      <li>
  
                          <a href="#general" title="General">
          <i class="icon-chevron-down"></i>
        General</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                    
      <li>
  
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                    
      <li>
  
                          <a href="http://www.apache.org/" class="externalLink" title="ASF">
          <i class="none"></i>
        ASF</a>
            </li>
                    
      <li>
  
                          <a href="downloads.html" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                    
      <li>
  
                          <a href="commercial-support.html" title="Commercial Support">
          <i class="none"></i>
        Commercial Support</a>
            </li>
              </ul>
        </li>
                                                                                                                  
      <li>
  
                          <a href="#installation" title="Installation and Upgrade">
          <i class="icon-chevron-down"></i>
        Installation and Upgrade</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                    
      <li>
  
                          <a href="Upgrade.html" title="Upgrade">
          <i class="none"></i>
        Upgrade</a>
            </li>
                    
      <li>
  
                          <a href="https://cwiki.apache.org/confluence/display/OPENMEETINGS/Tutorials+for+installing+OpenMeetings+and+Tools" class="externalLink" title="Tutorials">
          <i class="none"></i>
        Tutorials</a>
            </li>
                    
      <li>
  
                          <a href="CommandLineAdmin.html" title="Command Line Admin">
          <i class="none"></i>
        Command Line Admin</a>
            </li>
              </ul>
        </li>
                                                                                                                  
      <li>
  
                          <a href="#community" title="Community">
          <i class="icon-chevron-down"></i>
        Community</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="get-involved.html" title="Get Involved">
          <i class="none"></i>
        Get Involved</a>
            </li>
                    
      <li>
  
                          <a href="team-list.html" title="Committers">
          <i class="none"></i>
        Committers</a>
            </li>
                    
      <li>
  
                          <a href="mail-lists.html" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                    
      <li>
  
                          <a href="http://cwiki.apache.org/confluence/display/OPENMEETINGS/" class="externalLink" title="Wiki">
          <i class="none"></i>
        Wiki</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="#dev" title="Development">
          <i class="icon-chevron-down"></i>
        Development</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="svn.html" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                    
      <li>
  
                          <a href="http://issues.apache.org/jira/browse/OPENMEETINGS" class="externalLink" title="Bugs / Issues (JIRA)">
          <i class="none"></i>
        Bugs / Issues (JIRA)</a>
            </li>
                    
      <li>
  
                          <a href="dependencies.html" title="Dependencies">
          <i class="none"></i>
        Dependencies</a>
            </li>
                    
      <li>
  
                          <a href="BuildInstructions.html" title="Build Instructions">
          <i class="none"></i>
        Build Instructions</a>
            </li>
                    
      <li>
  
                          <a href="JUnitTesting.html" title="JUnit Testing">
          <i class="none"></i>
        JUnit Testing</a>
            </li>
                    
      <li>
  
                          <a href="ManualTesting.html" title="Manual Testing">
          <i class="none"></i>
        Manual Testing</a>
            </li>
                    
      <li>
  
                          <a href="ReleaseGuide.html" title="Release Guide">
          <i class="none"></i>
        Release Guide</a>
            </li>
                    
      <li>
  
                          <a href="WebsiteGuide.html" title="Website Guide">
          <i class="none"></i>
        Website Guide</a>
            </li>
              </ul>
        </li>
                                                                                                                                                      
      <li>
  
                          <a href="#integration" title="Integration">
          <i class="icon-chevron-down"></i>
        Integration</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="webservices/index.html" target="_blank" title="SOAP/REST API">
          <i class="none"></i>
        SOAP/REST API</a>
            </li>
                    
      <li>
  
                          <a href="RestAPISample.html" title="REST API Sample">
          <i class="none"></i>
        REST API Sample</a>
            </li>
                    
      <li>
  
                          <a href="LdapAndADS.html" title="Ldap and ADS">
          <i class="none"></i>
        Ldap and ADS</a>
            </li>
                    
      <li>
  
                          <a href="oauth2.html" title="OAuth2">
          <i class="none"></i>
        OAuth2</a>
            </li>
                    
      <li>
  
                          <a href="voip-sip-integration.html" title="VoIP and SIP">
          <i class="none"></i>
        VoIP and SIP</a>
            </li>
                    
      <li>
  
                          <a href="errorvalues.html" title="Errors table">
          <i class="none"></i>
        Errors table</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                            
      <li>
  
                          <a href="#plugins" title="Plugins">
          <i class="icon-chevron-down"></i>
        Plugins</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="MoodlePlugin.html" title="Moodle Plugin">
          <i class="none"></i>
        Moodle Plugin</a>
            </li>
                    
      <li>
  
                          <a href="SakaiPlugin.html" title="Sakai Plugin">
          <i class="none"></i>
        Sakai Plugin</a>
            </li>
                    
      <li>
  
                          <a href="JiraPlugin.html" title="Jira Plugin">
          <i class="none"></i>
        Jira Plugin</a>
            </li>
                    
      <li>
  
                          <a href="JoomlaPlugin.html" title="Joomla Plugin">
          <i class="none"></i>
        Joomla Plugin</a>
            </li>
                    
      <li>
  
                          <a href="DrupalPlugin.html" title="Drupal Plugin">
          <i class="none"></i>
        Drupal Plugin</a>
            </li>
                    
      <li>
  
                          <a href="BitrixPlugin.html" title="Bitrix Plugin">
          <i class="none"></i>
        Bitrix Plugin</a>
            </li>
                    
      <li>
  
                          <a href="ConfluencePlugin.html" title="Confluence Plugin">
          <i class="none"></i>
        Confluence Plugin</a>
            </li>
                    
      <li>
  
                          <a href="SugarCRMPlugin.html" title="SugarCRM Plugin">
          <i class="none"></i>
        SugarCRM Plugin</a>
            </li>
                    
      <li>
  
                          <a href="RedminePlugin.html" title="Redmine Plugin">
          <i class="none"></i>
        Redmine Plugin</a>
            </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="#config" title="Configuration">
          <i class="icon-chevron-down"></i>
        Configuration</a>
                    <ul class="nav nav-list">
                                                                                                                                                          
      <li>
  
                          <a href="#db" title="DB Sample Configurations">
          <i class="icon-chevron-down"></i>
        DB Sample Configurations</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="ApacheDerbyConfig.html" title="Apache Derby">
          <i class="none"></i>
        Apache Derby</a>
            </li>
                    
      <li>
  
                          <a href="IBMDB2Config.html" title="IBM DB2">
          <i class="none"></i>
        IBM DB2</a>
            </li>
                    
      <li>
  
                          <a href="OracleConfig.html" title="Oracle">
          <i class="none"></i>
        Oracle</a>
            </li>
                    
      <li>
  
                          <a href="MySQLConfig.html" title="MySQL">
          <i class="none"></i>
        MySQL</a>
            </li>
                    
      <li>
  
                          <a href="PostgresConfig.html" title="Postgres">
          <i class="none"></i>
        Postgres</a>
            </li>
                    
      <li>
  
                          <a href="MSSQLConfig.html" title="MSSQL">
          <i class="none"></i>
        MSSQL</a>
            </li>
              </ul>
        </li>
                                                                                                                      
      <li>
  
                          <a href="#localization" title="Localization and languages">
          <i class="icon-chevron-down"></i>
        Localization and languages</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="Internationalisation.html" title="Internationalisation">
          <i class="none"></i>
        Internationalisation</a>
            </li>
                    
      <li>
  
                          <a href="LanguageEditor.html" title="LanguageEditor">
          <i class="none"></i>
        LanguageEditor</a>
            </li>
                    
      <li>
  
                          <a href="TimeZoneHandling.html" title="TimeZoneHandling">
          <i class="none"></i>
        TimeZoneHandling</a>
            </li>
                    
      <li>
  
                          <a href="EditTemplates.html" title="EditTemplates">
          <i class="none"></i>
        EditTemplates</a>
            </li>
              </ul>
        </li>
                                                                
      <li>
  
                          <a href="#port" title="NAT Port Settings">
          <i class="icon-chevron-down"></i>
        NAT Port Settings</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="PortSettings.html" title="Port settings">
          <i class="none"></i>
        Port settings</a>
            </li>
              </ul>
        </li>
                                                                
      <li>
  
                          <a href="#performance" title="Performance">
          <i class="icon-chevron-down"></i>
        Performance</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="JVMPerformanceTuning.html" title="JVM performance tuning">
          <i class="none"></i>
        JVM performance tuning</a>
            </li>
              </ul>
        </li>
                                                                                                                                        
      <li>
  
                          <a href="#interface" title="User Interface">
          <i class="icon-chevron-down"></i>
        User Interface</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="themes-and-branding.html" title="Themes">
          <i class="none"></i>
        Themes</a>
            </li>
                    
      <li>
  
                          <a href="Dashboard.html" title="Dashboard">
          <i class="none"></i>
        Dashboard</a>
            </li>
                    
      <li>
  
                          <a href="WebcamResolutions.html" title="Webcam resolutions">
          <i class="none"></i>
        Webcam resolutions</a>
            </li>
                    
      <li>
  
                          <a href="ConferenceRoomLayoutOptions.html" title="Room layout options">
          <i class="none"></i>
        Room layout options</a>
            </li>
                    
      <li>
  
                          <a href="HotKeys.html" title="Hot Keys">
          <i class="none"></i>
        Hot Keys</a>
            </li>
              </ul>
        </li>
                                                                                                                                                          
      <li>
  
                          <a href="#customize" title="Customization">
          <i class="icon-chevron-down"></i>
        Customization</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="WebappNamePath.html" title="Webapp name/path">
          <i class="none"></i>
        Webapp name/path</a>
            </li>
                    
      <li>
  
                          <a href="Navigation.html" title="Navigation">
          <i class="none"></i>
        Navigation</a>
            </li>
                    
      <li>
  
                          <a href="CalendarAndTimezone.html" title="Calendar and timezone">
          <i class="none"></i>
        Calendar and timezone</a>
            </li>
                    
      <li>
  
                          <a href="CustomRoomTypeHowTo.html" title="Custom room type">
          <i class="none"></i>
        Custom room type</a>
            </li>
                    
      <li>
  
                          <a href="CustomCryptMechanism.html" title="Custom ctypt mechanism">
          <i class="none"></i>
        Custom ctypt mechanism</a>
            </li>
                    
      <li>
  
                          <a href="GeneralConfiguration.html" title="General Configuration">
          <i class="none"></i>
        General Configuration</a>
            </li>
              </ul>
        </li>
                                                                                  
      <li>
  
                          <a href="#security" title="Security">
          <i class="icon-chevron-down"></i>
        Security</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="RestrictedAccess.html" title="Restricted Access">
          <i class="none"></i>
        Restricted Access</a>
            </li>
                    
      <li>
  
                          <a href="RTMPSAndHTTPS.html" title="RTMPS and HTTPS">
          <i class="none"></i>
        RTMPS and HTTPS</a>
            </li>
              </ul>
        </li>
                                                                                  
      <li>
  
                          <a href="#convert" title="Converters">
          <i class="icon-chevron-down"></i>
        Converters</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="OpenOfficeConverter.html" title="OpenOffice Converter">
          <i class="none"></i>
        OpenOffice Converter</a>
            </li>
                    
      <li>
  
                          <a href="FFMPEGVersionSwitch.html" title="FFMPEG Version Switch">
          <i class="none"></i>
        FFMPEG Version Switch</a>
            </li>
              </ul>
        </li>
                                                                
      <li>
  
                          <a href="#cluster" title="Clustering">
          <i class="icon-chevron-down"></i>
        Clustering</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="Clustering.html" title="Clustering">
          <i class="none"></i>
        Clustering</a>
            </li>
              </ul>
        </li>
                                                                
      <li>
  
                          <a href="#misc" title="Misc">
          <i class="icon-chevron-down"></i>
        Misc</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="GetVersionInfo.html" title="Get version info">
          <i class="none"></i>
        Get version info</a>
            </li>
              </ul>
        </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <!-- Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License. -->
	
		<div class="section">
<h2>SIP-Transport Integration<a name="SIP-Transport_Integration"></a></h2>
			
<p>You need Apache OpenMeetings <b>version 3.0</b> to apply this guide!</p>
			
<p>You need Asterisk <b>version 11</b> to apply this guide!</p>
			
<p>Here is instruction how-to set up red5sip transport integration with OpenMeetings on Ubuntu 12.10.</p>
		</div>
		
<div class="section">
<h2>Prerequisites<a name="Prerequisites"></a></h2>
			
<div>
				Run the commands
				
<blockquote>
					<i>
						sudo apt-get update &amp;&amp; sudo apt-get upgrade<br />
						sudo apt-get install build-essential linux-headers-`uname -r` libxml2-dev libncurses5-dev libsqlite3-dev sqlite3 openssl libssl-dev<br />
					</i>
				</blockquote>
			</div>
		</div>
		
<div class="section">
<h2>ODBC Setup<a name="ODBC_Setup"></a></h2>
			
<div>
				Run the commands
				
<blockquote>
					<i>
						sudo apt-get update<br />
						sudo apt-get install unixODBC unixODBC-dev libmyodbc
					</i>
				</blockquote>
			</div>
			
<div>
				Set up Asterisk connector:<br /><br />
				Modify file <tt>/etc/odbc.ini</tt> as follows: (replace USER, PASSWORD and Socket with values relative to your system)
				
<blockquote>
					<i>
						[asterisk-connector]<br />
						Description = MySQL connection to 'openmeetings' database<br />
						Driver = MySQL<br />
						Database = openmeetings<br />
						Server = localhost<br />
						USER = root<br />
						PASSWORD =<br />
						Port = 3306<br />
						Socket = /var/run/mysqld/mysqld.sock<br />
					</i>
				</blockquote><br /><br />
				Modify file <tt>/etc/odbcinst.ini</tt> as follows: (replace the path to the *.so files below with the real paths on your system)
				
<blockquote>
					(The path below is for x32 server, x64 version is most probably located at <tt>/usr/lib/x86_64-linux-gnu/odbc</tt>)<br />
					<i>
						[MySQL]<br />
						Description = ODBC for MySQL<br />
						Driver = /usr/lib/i386-linux-gnu/odbc/libmyodbc.so<br />
						Setup = /usr/lib/i386-linux-gnu/odbc/libodbcmyS.so<br />
						FileUsage = 1<br />
					</i>
				</blockquote><br /><br />
				Run the following command to ensure everything works as expected:
				
<blockquote>
					<i>echo &quot;select 1&quot; | isql -v asterisk-connector</i>
				</blockquote>
			</div>
		</div>
		
<div class="section">
<h2>Building and setting up Asterisk<a name="Building_and_setting_up_Asterisk"></a></h2>
			
<div>
				Run the commands
				
<blockquote>
					<i>
						sudo mkdir /usr/src/asterisk &amp;&amp; cd /usr/src/asterisk<br />
						sudo wget http://downloads.asterisk.org/pub/telephony/asterisk/releases/asterisk-11.2.1.tar.gz<br />
						sudo tar -xvzf asterisk-11.2.1.tar.gz<br />
						cd ./asterisk-11.2.1<br />
						sudo make clean<br />
						sudo ./configure<br />
						sudo make<br />
						sudo make install<br />
						sudo make samples<br />
						sudo make config<br />
						sudo service asterisk start<br />
					</i>
				</blockquote>
			</div>
		</div>
		
<div class="section">
<h2>Configure Asterisk<a name="Configure_Asterisk"></a></h2>
			
<div>
				Enable asterisk ODBC module:<br /><br />
				Modify &quot;[modules]&quot; section of <tt>/etc/asterisk/modules.conf</tt> as follows:<br />
				<b>Add/uncomment the following lines</b>
				
<blockquote>
					<i>
						preload =&gt; res_odbc.so<br />
						preload =&gt; res_config_odbc.so<br />
					</i>
				</blockquote>
			</div><br />
			
<div>
				Create/update &quot;[asterisk]&quot; section in <tt>/etc/asterisk/res_odbc.conf</tt>:
				
<blockquote>
					<i>
						[asterisk]<br />
						enabled =&gt; yes<br />
						dsn =&gt; asterisk-connector<br />
						pre-connect =&gt; yes
					</i>
				</blockquote>
			</div><br />
			
<div>
				Modify <tt>/etc/asterisk/sip.conf</tt><br />
				<b>Add/uncomment the following line</b>:<br />
				
<blockquote>
					<i>
						videosupport=yes<br />
						rtcachefriends=yes<br />
					</i>
				</blockquote>
				<b>Increase maxexpiry value to 43200</b>:<br />
				
<blockquote>
					<i>
						maxexpiry=43200<br />
				        </i>
				</blockquote>
				<b>Add user for the &quot;SIP Transport&quot;</b>:<br />
				
<blockquote>
					<i>
						[red5sip_user]<br />
						type=friend<br />
						secret=12345<br />
						disallow=all<br />
						allow=ulaw<br />
						allow=h264<br />
						host=dynamic<br />
						nat=force_rport,comedia<br />
						context=rooms-red5sip<br />
					</i>
				</blockquote>
			</div><br />
			
<div>
				Add next lines into the <tt>/etc/asterisk/extconfig.conf</tt>:
				
<blockquote>
					<i>
						[settings]<br />
						sippeers =&gt; odbc,asterisk,sipusers<br />
					</i>
				</blockquote>
			</div><br />
			
<div>
				Modify <tt>/etc/asterisk/extensions.conf</tt><br />
				<b>Add the following section</b>:<br />
				
<blockquote>
					<i>
						[rooms]<br />
						exten =&gt; _400X!,1,GotoIf($[${DB_EXISTS(openmeetings/rooms/${EXTEN})}]?ok:notavail)<br />
						exten =&gt; _400X!,n(ok),SET(PIN=${DB(openmeetings/rooms/${EXTEN})})<br />
						exten =&gt; _400X!,n,Set(CONFBRIDGE(user,template)=sip_user)<br />
						exten =&gt; _400X!,n,Set(CONFBRIDGE(user,pin)=${PIN})<br />
						exten =&gt; _400X!,n(ok),Confbridge(${EXTEN},default_bridge,)<br />
						exten =&gt; _400X!,n,Hangup<br />
						exten =&gt; _400X!,n(notavail),Answer()<br />
						exten =&gt; _400X!,n,Playback(invalid)<br />
						exten =&gt; _400X!,n,Hangup<br />
						<br />
						[rooms-originate]<br />
						exten =&gt; _400X!,1,Confbridge(${EXTEN},default_bridge,sip_user)<br />
						exten =&gt; _400X!,n,Hangup<br />
						<br />
						[rooms-out]<br />
						; *****************************************************<br />
						; Extensions for outgoing calls from Openmeetings room.<br />
						; *****************************************************<br />
						<br />
						[rooms-red5sip]<br />
						exten =&gt; _400X!,1,GotoIf($[${DB_EXISTS(openmeetings/rooms/${EXTEN})}]?ok:notavil)<br />
						exten =&gt; _400X!,n(ok),Confbridge(${EXTEN},default_bridge,red5sip_user)<br />
						exten =&gt; _400X!,n(notavail),Hangup <br />
					</i>
				</blockquote>
			</div><br />
			
<div>
				Modify <tt>/etc/asterisk/confbridge.conf</tt><br />
				<b>Add/Modify the following secions</b>:<br />
				
<blockquote>
					<i>
						[general]<br />
						<br />
						[red5sip_user]<br />
						type=user<br />
						marked=yes<br />
						dsp_drop_silence=yes<br />
						denoise=true<br />
						<br />
						[sip_user]<br />
						type=user<br />
						end_marked=yes<br />
						wait_marked=yes<br />
						music_on_hold_when_empty=yes<br />
						dsp_drop_silence=yes<br />
						denoise=true<br />
						<br />
						[default_bridge]<br />
						type=bridge<br />
						video_mode=follow_talker<br /> 
					</i>
				</blockquote>
			</div><br />
			
<div>
				To enable Asterisk Manager API modify <tt>/etc/asterisk/manager.conf</tt><br />
				<b>Add/Modify the following sections</b>:<br />
				
<blockquote>
					<i>
						[general]<br />
						enabled = yes<br />
						webenabled = no<br />
						port = 5038<br />
						bindaddr = 127.0.0.1<br />
						<br />
						[openmeetings]<br />
						secret = 12345<br />
						deny=0.0.0.0/0.0.0.0<br />
						permit=127.0.0.1/255.255.255.0<br />
						read = all<br />
						write = all<br />
					</i>
				</blockquote>
			</div><br />
			
<div>
				Update Openmeetings with creadentials for Asterisk manager. 
				Modify <tt>/opt/red5/webapps/openmeetings/WEB-INF/classes/openmeetings-applicationContext.xml</tt><br />
				find <b>&lt;bean id=&quot;sipDao&quot; class=&quot;org.apache.openmeetings.db.dao.room.SipDao&quot;&gt;</b>
				uncomment its parameters and set it to your custom values.
				
<p style="font-size: larger; color: blue;">
					IMPORTANT: this step should be done <b>BEFORE</b> system install/restore
					otherwise all SIP related room information will be lost
				</p>   
			</div><br />
			
<div>
				Restart asterisk:
				
<blockquote>
					<i>service asterisk restart</i>
				</blockquote>
			</div><br />
		</div>

		
<div class="section">
<h2>Setup red5sip transport<a name="Setup_red5sip_transport"></a></h2>
			
<div>
				Download red5sip from
				
<blockquote>http://red5phone.googlecode.com/svn/branches/red5sip_3.0</blockquote>
			</div>
			
<div>
				Build with Apache Ant
				
<blockquote>
					<i>ant</i>
				</blockquote>
			</div>
			
<div>
				Insert proper values to the <tt>/opt/red5sip/settings.properties</tt>

				
<blockquote>
					<i>
						red5.host=127.0.0.1 # red5 server address<br />
						om.context=openmeetings # Openmeetings context<br /> 
						red5.codec=asao<br />
						red5.codec.rate=22 # should correlate with mic settings in public/config.xml<br />
						sip.obproxy=127.0.0.1 # asterisk adderss<br />
						sip.phone=red5sip_user # sip phone number<br />
						sip.authid=red5sip_user # sip auth id<br />
						sip.secret=12345 # sip password<br />
						sip.realm=asterisk # sip realm<br />
						sip.proxy=127.0.0.1 # address of sip proxy <br />
						rooms.forceStart=no # TBD <br />
						rooms=1 # TBD (not in use) <br />
					</i>
				</blockquote>
			</div>
			
<div>
				Add red5sip to autostart:
				
<blockquote>
					<i>
						sudo cp /opt/red5sip/red5sip /etc/init.d/<br />
						sudo chmod a+x /etc/init.d/red5sip<br />
						sudo update-rc.d red5sip defaults
					</i>
				</blockquote>
			</div>
			
<div>
				Start openmeetings
				
<blockquote>
					<i>service red5 start</i>
				</blockquote>
			</div>
			
<div>
				Start red5sip
				
<blockquote>
					<i>service red5sip start</i>
				</blockquote>
			</div>
		</div>
	

                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2012&#x2013;2014
                        <a href="http://apache.org">Apache Software Foundation</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
